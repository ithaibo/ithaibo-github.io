## 2.1 volatike的实现原理，优化
## 2.2 锁
java中锁
- 对于普通同步方法，锁是当前实例对象。
- 对于静态同步方法，锁是当前类的Class对象。
- 对于同步方法块，锁是Synchonized括号里配置的对象

当一个线程试图访问同步代码块时，它首先必须得到锁，退出或抛出异常时必须释放锁。

### 2.2.2 synchronized实现原理
JVM基于进入和退出Monitor对象来实现方法同步和代码块同步。代码块同步是使用monitorenter和monitorexit指令实现的，monitorenter指令是在编译后插入到同步代码块的开始位置，而monitorexit是插入到方法结束处和异常处。线程执行到monitorenter指令时，将会尝试获取对象所对应的monitor的所有权，即尝试获得对象的锁。


JavaSE1.6中锁的状态：
 - 无状态锁
 - 偏向锁状态
 - 轻量级锁状态
 - 重量级锁状态

上面的几个状态竞争情况逐渐升级，锁可以升级但不可以降级。

偏向锁

轻量级锁


## 2.3 原子操作的实现原理
在Java中可以通过锁和循环CAS的方式来实现原子操作。